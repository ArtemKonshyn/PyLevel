---


---

<h1 id="templates-они-же-темплейты-они-же-шаблоны">Templates (они же Темплейты, они же Шаблоны)</h1>
<p><img src="https://i.imgur.com/9hGDo54.png" alt="enter image description here"><br>
Шаблон это текстовый файл, который определяет структуру и расположение данных в файле, кроме того, в нем размещают специальные теги, которые используются для показа реального содержимого, то есть данных. По умолчанию Django ищет файлы шаблонов в директории с именем <strong>templates</strong> внутри вашего приложения.</p>
<p>В папке приложения необходимо создать папку <code>templates, а в ней</code> нужно создать html файл, назовём его <code>index.html</code> (Название не имеет значения, главное, что бы формат был <code>html</code>)</p>
<pre><code>mysite/
	myapp/
		templates/
		    index.html
manage.py
</code></pre>
<p>С таким содержанием:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>  
  
Hello, world!  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>  
That's template!  
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Итак, теперь у нас есть один шаблон, но мы его не используем, давайте переделаем нашу  <code>view</code>  для обработки шаблонов</p>
<p>В файле  <code>myapp/views.py</code>  нужно импортировать обработчик шаблонов, в начале файла добавляем</p>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
</code></pre>
<p>И перепишем функцию  <code>index</code>:</p>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
</code></pre>
<p>Обновим страницу в браузере и увидим результат<br>
<img src="https://i.imgur.com/P6xnlvD.png" alt="enter image description here"></p>
<h3 id="альтеранативный-вариант-расположениея-templates">Альтеранативный вариант расположениея templates</h3>
<p>Создадим новую папку на уровне корня проекта и назовём её  <code>templates</code>  (Название может быть любым, но принято называть именно так.) Что бы получилась вот такая структура</p>
<pre><code>mysite/
myapp/
templates/
manage.py
</code></pre>
<p>Для того, что бы обрабатывать шаблоны мы должны “рассказать” Django где именно искать эти самые шаблоны, для этого нужно открыть  <code>mysite/settings.py</code>  и отредактировать его.</p>
<p>В данный момент нас интересует переменная  <code>TEMPLATES</code>, выглядит примерно так:<br>
В ключ <code>DIRS</code> добавим нашу папку с шаблонами, что бы получилось так:<br>
<img src="https://i.imgur.com/ONrUHj6.png" alt="enter image description here"><br>
Ключи:</p>
<p><code>BACKEND</code> - путь к классу который отвечает за обработку данных и логику. (Замена требуется очень редко)</p>
<p><code>DIRS</code> список папок в которых Django будет искать шаблоны</p>
<p><code>APP_DIRS</code> -  булевое поле которое отвечает за то, нужно ли искать папки с шаблонами внутри папки с приложениями, например в нашей структуре, если значение  <code>False</code>, то поиск будет только в папке  <code>templates</code>  на уровне файла  <code>manage.py</code>, а если значение  <code>True</code>  то в папках  <code>/templates</code>  и  <code>/myapp/templates/</code></p>
<p><code>OPTIONS</code> - дополнительные настройки.</p>
<h3 id="render">render()</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render

render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> template_name<span class="token punctuation">,</span> context<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> content_type<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> using<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre>
<p>Объединяет заданный шаблон с заданным контекстным словарем и возвращает объект <a href="https://django.fun/docs/django/ru/3.2/ref/request-response/#django.http.HttpResponse" title="django.http.HttpResponse"><code>HttpResponse</code></a> с этим визуализированным кодом.</p>
<h3 id="обязательные-аргументы">Обязательные аргументы</h3>
<p><code>request</code></p>
<p>Объект запроса, использованный для генерации этого ответа.</p>
<p><code>template_name</code></p>
<p>Полное имя используемого шаблона или последовательность имен шаблонов. Если указана последовательность, будет использован первый существующий шаблон.</p>
<h3 id="необязательные-аргументы">Необязательные аргументы</h3>
<p><code>context</code></p>
<p>Словарь значений для добавления в контекст шаблона. По умолчанию это пустой словарь. Если значение в словаре является вызываемым, представление вызовет его непосредственно перед отрисовкой шаблона.</p>
<p><code>content_type</code></p>
<p><a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_MIME-%D1%82%D0%B8%D0%BF%D0%BE%D0%B2">Тип MIME</a> для использования в итоговом документе. По умолчанию -  <code>text/html</code>.</p>
<p><code>status</code></p>
<p>Код состояния для ответа. По умолчанию  <code>200</code>.<br>
Если передать, например, 500, в консоли браузера можно увилеть подобные ошибки<br>
<img src="https://i.imgur.com/qRjuWLI.png" alt="enter image description here"></p>
<p><code>using</code></p>
<p>Параметр шаблонизатора, который будет использоваться для загрузки шаблона.</p>
<p>Для демонстрации основных типов данных, допишем функцию  <code>index</code>  и передам большое кол-во значений в словаре:</p>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    string <span class="token operator">=</span> <span class="token string">''</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>string <span class="token operator">=</span> s

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    my_num <span class="token operator">=</span> <span class="token number">33</span>
    my_str <span class="token operator">=</span> <span class="token string">'some string'</span>
    my_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"some_key"</span><span class="token punctuation">:</span> <span class="token string">"some_value"</span><span class="token punctuation">}</span>
    my_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'list_first_item'</span><span class="token punctuation">,</span> <span class="token string">'list_second_item'</span><span class="token punctuation">,</span> <span class="token string">'list_third_item'</span><span class="token punctuation">]</span>
    my_set <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'set_first_item'</span><span class="token punctuation">,</span> <span class="token string">'set_second_item'</span><span class="token punctuation">,</span> <span class="token string">'set_third_item'</span><span class="token punctuation">}</span>
    my_tuple <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'tuple_first_item'</span><span class="token punctuation">,</span> <span class="token string">'tuple_second_item'</span><span class="token punctuation">,</span> <span class="token string">'tuple_third_item'</span><span class="token punctuation">)</span>
    my_class <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token string">'class string'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string">'my_num'</span><span class="token punctuation">:</span> my_num<span class="token punctuation">,</span>
        <span class="token string">'my_str'</span><span class="token punctuation">:</span> my_str<span class="token punctuation">,</span>
        <span class="token string">'my_dict'</span><span class="token punctuation">:</span> my_dict<span class="token punctuation">,</span>
        <span class="token string">'my_list'</span><span class="token punctuation">:</span> my_list<span class="token punctuation">,</span>
        <span class="token string">'my_set'</span><span class="token punctuation">:</span> my_set<span class="token punctuation">,</span>
        <span class="token string">'my_tuple'</span><span class="token punctuation">:</span> my_tuple<span class="token punctuation">,</span>
        <span class="token string">'my_class'</span><span class="token punctuation">:</span> my_class<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Значения переданы, но пока они никак не используются, давай те же посмотрим, как отобразить переменные в шаблоне!</p>
<h2 id="django-template-language-or-dtl">Django Template Language or DTL</h2>
<p>Язык шаблонов Django</p>
<h3 id="переменные">Переменные</h3>
<p>Переменная выводит значение из контекста, которое представляет собой dict-подобный объект, отображающий ключи к значениям.</p>
<p>Переменные заключаются в специальные символы - двойные фигурные скобки  <code>{{</code>  и  <code>}}</code>, например:</p>
<p>My first name is {{ first_name }}. My last name is {{ last_name }}.</p>
<p>В контексте  <code>{'first_name': 'John', 'last_name': 'Doe'}</code>  этот шаблон отображается в:</p>
<p>My first name is John. My last name is Doe.</p>
<p>Поиск по словарю, поиск по атрибутам и поиск по списку-индексу реализованы с использованием точечной нотации:</p>
<pre class=" language-python"><code class="prism  language-python"><span class="token punctuation">{</span><span class="token punctuation">{</span> my_dict<span class="token punctuation">.</span>key <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> my_object<span class="token punctuation">.</span>attribute <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> my_list<span class="token number">.0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre>
<p>Если переменная преобразуется в вызываемую, система шаблонов вызовет ее без аргументов и будет использовать ее результат вместо вызываемого.</p>
<p>Изменим   <strong>index.html</strong>:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px darkblue solid</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ my_num }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px darkseagreen solid</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ my_str }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px fuchsia solid</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ my_set }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px firebrick solid</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ my_dict.some_key }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px cyan solid</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ my_class.string }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px cyan solid</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ my_list.0 }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px burlywood solid</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ my_tuple.1 }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p><img src="https://drive.google.com/uc?export=view&amp;id=1M78tJpdqJzncPc60UcCEi1es6Su12Trq" alt="enter image description here"></p>
<h3 id="теги">Теги</h3>
<p>Теги обеспечивают произвольную логику в процессе рендеринга.</p>
<p>Это определение заведомо расплывчатое. Например, тег может выводить контент, служить структурой управления, например. оператор «if» или цикл «for», захват содержимого из базы данных или даже разрешение доступа к другим тегам шаблона.</p>
<p>Теги заключаются в символы  <code>{%</code>  и  <code>%}</code>, например:</p>
<pre><code>{% csrf_token %}
</code></pre>
<p>Большинство тегов принимают аргументы:</p>
<pre><code>{% cycle 'odd' 'even' %}
</code></pre>
<p>Для некоторых тегов требуются начальные и конечные теги:</p>
<pre><code>{% if user.is_authenticated %}Hello, {{ user.username }}.{% endif %}
</code></pre>
<h4 id="логические-операторы">Логические операторы</h4>
<p>В шаблонах можно оперировать не только переменными, но и не сложной логикой, такой как логические операторы и циклы.</p>
<p>Давайте добавим в наши параметры переменную ‘display_num’ и назначим ей False</p>
<p><code>myapp/views.py</code></p>
<pre class=" language-python"><code class="prism  language-python"> <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'my_num'</span><span class="token punctuation">:</span> my_num<span class="token punctuation">,</span>
    <span class="token string">'my_str'</span><span class="token punctuation">:</span> my_str<span class="token punctuation">,</span>
    <span class="token string">'my_dict'</span><span class="token punctuation">:</span> my_dict<span class="token punctuation">,</span>
    <span class="token string">'my_list'</span><span class="token punctuation">:</span> my_list<span class="token punctuation">,</span>
    <span class="token string">'my_set'</span><span class="token punctuation">:</span> my_set<span class="token punctuation">,</span>
    <span class="token string">'my_tuple'</span><span class="token punctuation">:</span> my_tuple<span class="token punctuation">,</span>
    <span class="token string">'my_class'</span><span class="token punctuation">:</span> my_class<span class="token punctuation">,</span>
    <span class="token string">'display_num'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Для логических условий и циклов используются другие скобки  <code>{% %}</code></p>
<p>Изменим наш шаблон с использованием логики:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {% if display_num %}
        {{ my_num }}
    {% else %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span> We don't display num <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    {% endif %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Обновим страницу и увидим:<br>
<img src="https://i.imgur.com/axtARwH.png" alt="enter image description here"></p>
<p>А если изменим только во view переменную с False на True:</p>
<p><code>myapp/views.py</code></p>
<p>То увидим:<br>
<img src="https://i.imgur.com/0NWJkLj.png" alt="enter image description here"></p>
<p>Т.к. переменная True, то мы видим значение переменной  <code>my_num</code></p>
<h4 id="циклы">Циклы</h4>
<p><img src="https://i.imgur.com/PCXmZoZ.png" alt="enter image description here"><br>
Так же как и в python мы можем использовать циклы в шаблонах, но только цикл for</p>
<p>Изменим  <code>index.html</code>:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {% for item in my_list %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Обновим страницу и увидим:<br>
<img src="https://i.imgur.com/9zxnecy.png" alt="enter image description here"><br>
Еще раз, логика через  <code>{% %}</code>, данные через  <code>{{ }}</code></p>
<p>Давайте скомбинируем!</p>
<p>Внутри цикла  <code>for</code>  Django уже генерирует некоторые переменные, например переменную<br>
<code>{{ forloop.counter0 }}</code>, в которой хранится индекс текущей итерации, давайте не будем выводить в цикле второй элемент (индексация начинается с 0)</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {% for item in my_list %}
        {% if forloop.counter0 != 1 %}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        {% endif %}
    {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Обновляем страницу и видим:<br>
<img src="https://i.imgur.com/3DrWnMY.png" alt="enter image description here"></p>
<h4 id="url">url</h4>
<p>Тег url позволяет нам сгенерировать урл по его имени. Это очень удобно если адрес меняется, а его имя нет.</p>
<p>Давайте сгенерируем две ссылки на два наших урла.</p>
<p><code>mysite/urls.py</code></p>
<p>Назначим имя  <code>index</code></p>
<pre><code>path('', index, name='index')
</code></pre>
<p><code>myapp/urls.py</code></p>
<p>Назначим имя  <code>first</code></p>
<pre><code>path('', first, name='first')
</code></pre>
<p>Добавим в наш шаблон ссылку на вторую страницу:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{% url <span class="token punctuation">'</span>first<span class="token punctuation">'</span> %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Another page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p><img src="https://i.imgur.com/KR1m6bQ.png" alt="enter image description here"></p>
<h3 id="комментарии">Комментарии</h3>
<p>Однострочный</p>
<pre class=" language-html"><code class="prism  language-html">{# this won't be rendered #}
</code></pre>
<p>Многострочный при помощи тега <strong>comment</strong></p>
<pre class=" language-html"><code class="prism  language-html">{% comment "Optional note" %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Commented out text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
{% endcomment %}
</code></pre>
<h2 id="фильтры">Фильтры</h2>
<p>Фильтры преобразуют значения переменных и аргументов тегов.</p>
<p>Выглядят они так:</p>
<pre><code>{{ django|title }}
</code></pre>
<p>В контексте  <code>{'django': 'the web framework for perfectionists with deadlines'}</code>, этот шаблон отображает:</p>
<pre><code>The Web Framework For Perfectionists With Deadlines
</code></pre>
<p>Некоторые фильтры принимают аргумент:</p>
<pre><code>{{ my_date|date:"Y-m-d" }}
</code></pre>
<p><img src="https://i.imgur.com/QD2d0Ed.png" alt="enter image description here"><br>
<a href="https://django.fun/docs/django/ru/3.1/ref/templates/builtins/#ref-templates-builtins-filters">Справочник по встроенным фильтрам</a>,<br>
а также  <a href="https://django.fun/docs/django/ru/3.1/howto/custom-template-tags/#custom-template-tags-and-filters">инструкции по написанию пользовательских тегов и фильтров</a>.</p>
<h2 id="наследование-шаблонов">Наследование шаблонов</h2>
<p><img src="https://miro.medium.com/max/625/1*xz1vMkcyYtTSkaR4GZF3Sg.jpeg" alt="enter image description here"><br>
Наши предыдущие примеры шаблонов были небольшими фрагментами HTML-кода, однако в реальной ситуации вы будете использовать Django для создания больших страниц. Отсюда возникает один из наиболее существенных вопросов веб-разработки — как уменьшить количество повторяющегося и избыточного кода в общих частях страниц, таких как хедер, футер, навигация по сайту?</p>
<p>Основная фишка шаблонов Django — наследование. Шаблон может расширять (уточнять) поведение родительского шаблона.</p>
<p>Любой участок шаблона может быть обернут в блочный тег (естественно, что тег не может начинаться перед, а заканчиваться внутри цикла). Блоку дается имя. Например:</p>
<pre class=" language-html"><code class="prism  language-html">{% block content %}
	тело блока
{% endblock %}
</code></pre>
<p>При помощи тега extend мы указываем, какой шаблон мы будем уточнять. Расширяя шаблон, мы можем переопредилить любые блоки, которые есть в родительском шаблоне. Все, что находится вне этих блоков, будет пропущено.</p>
<p>Получается мощный механизм, практически исключающий необходимость повторения частей шаблонов.</p>
<h3 id="пример-наследования-шаблонов">Пример наследования шаблонов</h3>
<p>Допустим, мы хотим сделать сайт, содержащий простые страницы и блог.</p>
<p>От верстальщика мы получили макет страницы, содержащий:</p>
<ul>
<li>шапку (логотип, заголовок страницы, меню);</li>
<li>тело страницы;</li>
<li>и «подвал» с информацией о правах распространения.</li>
</ul>
<p>Вот как это выглядит:</p>
<p>|<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/843/09e/0bc/84309e0bcd4a24dd5570c8c75cf11824.png" alt=""></p>
<pre class=" language-html"><code class="prism  language-html">{% block head %}
	{% block title %}{% endblock %}
	{% block menu %}{% endblock %}
{% endblock %}

{% block page %}
	{% block content %}
	{% endblock %}
{% endblock %}

{% block footer %}
	{% block copyright %}
	{% endblock %}
{% endblock %}
</code></pre>
<p>Для всех указанных элементов мы создаем соответствующие блочные теги.</p>
<p>Простая страница ложится в этот макет — у нее есть только заголовок и тело.</p>
<p>Теперь перейдем к блогу. В блоге хотелось бы добавить правую колонку для вывода списка тегов и последних статей. Возможно мы захотим добавить правую колонку к каким-нибудь другим страницам сайта. Чтобы избежать копирования «двухколоночности», вынесем ее в отдельный шаблон, переопределив тело страницы у базового.</p>
<p><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/6c2/1a7/353/6c21a73533582f4cc97fd2d463520ac5.png" alt=""></p>
<pre class=" language-html"><code class="prism  language-html">{% extend "base.htm" %}

{% block page %}
	{% block content %}
	{% endblock %}

	{% block sidebar %}
	{% endblock %}
{% endblock %}
</code></pre>
<p>В блоге будет несколько типов страниц:</p>
<ul>
<li>список статей;</li>
<li>статья;</li>
<li>список тегов;</li>
<li>список статей, у которых есть определенный тег;</li>
<li>пр.</li>
</ul>
<p>У всех страниц правая колонка остается неизменной, поэтому разумно сделать базовую страницу для блога, наследуя ее от двухколоночной базовой страницы.</p>
<p><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/366/ef7/e49/366ef7e49931ef01aa4f0e8fa14581da.png" alt=""></p>
<pre class=" language-html"><code class="prism  language-html">{% extend "base_2col.htm" %}

{% block title %}
	Блог
{% endblock %}

{% block sidebar %}
	{% block tags %}
	{% endblock %}

	{% block recent %}
	{% endblock %}
{% endblock %}
</code></pre>
<p>Теперь приведем примеры внутренних страниц блога (все они наследуются от базовой страницы блога).</p>
<p>Список статей:</p>
<p><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/7b1/a12/dd0/7b1a12dd0753e8b99172e17b1109854d.png" alt=""></p>
<pre class=" language-html"><code class="prism  language-html">{% extend "blog/base.htm" %}

{% block content %}
	{% for article in article_list %}
		«a href="{% url article_view article.id %}"»
		{{ article.title }}
		«/a»
	{% endfor %}
{% endblock %}
</code></pre>
<p>Статья:</p>
<p><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/db3/f30/b6d/db3f30b6d5f77cf0ff0c9a870df01fd9.png" alt=""></p>
<pre class=" language-html"><code class="prism  language-html">{% extend "blog/base.htm" %}

{% block title %}
	{{ article.title }} - {{ block.super }}
{% endblock %}

{% block content %}
	{{ article.text }}
{% endblock %}
</code></pre>
<p>Список статей, у которых есть определенный тег:</p>
<p><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/52d/6ff/5c2/52d6ff5c24f6abfe7fa0438f439c01f7.png" alt=""></p>
<pre class=" language-html"><code class="prism  language-html">{% extend "blog/index.htm" %}

{% block title %}
	{{ tag.title }} - {{ block.super }}
{% endblock %}

{% block content %}
	{{ tag.title }}
	{{ tag.text }}

	{{ block.super }}
{% endblock %}
</code></pre>
<p>В данном случае, мы воспользовались еще одной хитростью. Ведь этот список ничем не отличается от простого списка статей — он просто отфильтрован по дополнительным параметрам. Поэтому мы унаследовали его от списка статей и при перекрытии тела использовали тег <code>{{ block.super }}</code> — вывести все содержимое родительского блока.</p>
<p>Как видно, каждый шаблон очень конкретен и отвечает только за свою функциональность. Ему нет необходимости знать о всей странице в целом.</p>
<h4 id="практика-по-наследованию">Практика по наследованию</h4>
<p>Создадим в папке  <code>templates</code>  новые файлы  <code>base.html</code>  и  <code>first.html</code>  и изменим файлы  <code>templates/index.html</code>  и функцию  <code>first</code>  в  <code>myapp/views.py</code></p>
<p><code>template/base.html</code></p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> aqua</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {% block content %}
    {% endblock %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p><code>template/index.html</code></p>
<pre class=" language-html"><code class="prism  language-html">{% extends 'base.html' %}

{% block content %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> fuchsia</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> Extended template index!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{% url <span class="token punctuation">'</span>first<span class="token punctuation">'</span> %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>To the first page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
{% endblock %}
</code></pre>
<p><code>template/first.html</code></p>
<pre class=" language-html"><code class="prism  language-html">{% extends 'base.html' %}

{% block content %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> chocolate</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> Extended template first!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{% url <span class="token punctuation">'</span>index<span class="token punctuation">'</span> %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>To the index page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
{% endblock %}
</code></pre>
<p>Функция  <code>first</code>  в  <code>myapp/views.py</code></p>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">first</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'first.html'</span><span class="token punctuation">)</span>
</code></pre>
<p>Смотрим результаты произошедшего и пытаемся их понять. (ссылки добавлены для удобства)</p>
<p>Индекс страница<br>
<img src="https://i.imgur.com/AsFO0eA.png" alt="enter image description here"></p>
<p>Первая страница<br>
<img src="https://i.imgur.com/OoANVPb.png" alt="enter image description here"></p>
<p>Что произошло?</p>
<p>Мы создали базовый шаблон  <code>base.html</code>  в котором описали то что будет во всех шаблонах (И покрасили в голубенький, для наглядности) которые от него наследуются, и обозначили  <code>{% block content %}</code>  вся нужная нам информация будет наследоваться именно в указанный блок, на странице разных блоков может быть сколько угодно главное, что бы они имели разные названия.</p>
<p>Наш индекс пейдж рендерит страницу  <code>index.html</code>  в ней мы отнаследовались от нашей  <code>base.html</code>  вписали такой же блок  <code>content</code>  что бы в него вписать нужные нам данные, в нашем случае это просто текст и ссылка, текст мы перекрасили, что бы было видно что это данные из нового файла, а ссылку -  нет, что бы было видно, что цвет из  <code>base.html</code>  отнаследовался, то же самое произошло и с  <code>first.html</code></p>
<h4 id="include">Include</h4>
<p>А теперь представим обратную ситуацию, нам нужно в разные части сайта вставить один и тот же блок (рекламу, например)</p>
<p>Тут нас спасает тег  <code>include</code>  который позволяет “внедрить” нужную часть страницы куда угодно</p>
<p>Создадим в папке  <code>templates</code>  еще один файл с названием  <code>add.html</code></p>
<p><code>templates/add.html</code></p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> chartreuse</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> That's included html!!!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>И теперь добавим этот файл к страницам  <code>index.html</code>  и  <code>first.html</code>  но в разные места, что бы получилось</p>
<p><code>template/index.html</code></p>
<pre class=" language-html"><code class="prism  language-html">{% extends 'base.html' %}

{% block content %}
{% include 'add.html' %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> fuchsia</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> Extended template index!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{% url <span class="token punctuation">'</span>first<span class="token punctuation">'</span> %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>To the first page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
{% endblock %}
</code></pre>
<p><code>template/first.html</code></p>
<pre class=" language-html"><code class="prism  language-html">{% extends 'base.html' %}

{% block content %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> chocolate</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> Extended template first!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{% url <span class="token punctuation">'</span>index<span class="token punctuation">'</span> %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>To the index page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
{% include 'add.html' %}
{% endblock %}
</code></pre>
<p>Смотрим на результат:</p>
<p>index:<br>
<img src="https://i.imgur.com/uIu3mA1.png" alt="enter image description here"></p>
<p>first:<br>
<img src="https://i.imgur.com/hJMQum9.png" alt=""></p>
<p>В добавленную станицу можно передать переменные, при помощи тега  <code>with</code></p>
<p>Изменим файл  <code>templates/add.html</code></p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> chartreuse</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> Hello {{ name }} !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>И файл  <code>templates/index.html</code></p>
<pre class=" language-html"><code class="prism  language-html">{% extends 'base.html' %}

{% block content %}
{% include 'add.html' with name='world' %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> fuchsia</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> Extended template index!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{% url <span class="token punctuation">'</span>first<span class="token punctuation">'</span> %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>To the first page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
{% endblock %}
</code></pre>
<p>Смотрим на результат:</p>
<p>index<br>
<img src="https://i.imgur.com/fIOYXO1.png" alt="enter image description here"></p>
<p>first<br>
<img src="https://i.imgur.com/tdYKeN4.png" alt="enter image description here"></p>
<p>В первом случае, мы видим добавлена переменная, во втором ничего так как мы ничего не передавали.</p>
<p>Давайте добавим проверку на наличие переменной!</p>
<p><code>templates/add.html</code></p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> chartreuse</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{% if name %} Hello {{ name }} ! {% else %} Sorry I don't know your name {% endif %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Смотрим на first page<br>
<img src="https://i.imgur.com/bt5IgEv.png" alt="enter image description here"></p>
<p>Переменной нет, срабатывает if</p>
<p>Так же можно передавать эту переменную из view, для этого нужно в with дописать  <code>{{ variable }}</code></p>
<h2 id="домашнее-задание--практика">Домашнее задание / Практика</h2>
<p>Создать базовую html от которой будут наследоваться все остальные</p>
<p>Для статических урлов сделать html файлы наследующиеся от базового, но с разным текстом (можно и оформлением)</p>
<p>Для урлов  <code>http://127.0.0.1:8000/article/&lt;int:article_number&gt;</code>,  <code>http://127.0.0.1:8000/article/&lt;int:article_number&gt;/&lt;slug:slug_text&gt;</code>,</p>
<p>cделать html файлы в которых выводить текст о том чётный введен или нечётный  <code>article_number</code>  (логику прописать в темплейтах), если введён  <code>slug_text</code>, выводить этот текст при помощи include в добавочной html (добавленной из отдельного файла).</p>
<p>На главной странице (<a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a>) сделать две ссылки, перейти на случайную статью (id), и перейти на случайную статью со случайным слагом (5-10 случайных символов)</p>
<p>На всех страницах внизу должна быть ссылка на главную.</p>
<h2 id="литература-что-почитать">Литература (что почитать)</h2>
<ol>
<li><a href="https://django.fun/docs/django/ru/3.2/ref/templates/language/">Язык шаблонов Django</a></li>
<li><a href="https://django.fun/docs/django/ru/3.2/ref/templates/builtins/">Встроенные теги и фильтры шаблонов</a></li>
</ol>

